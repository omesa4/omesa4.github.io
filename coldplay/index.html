
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <title>Coldplay</title>
    <style>
        /* Estilos generales */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff4e50, #f9d423);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Cambiado a flex-start para permitir desplazamiento */
            min-height: 100vh; /* Mínimo de altura completa */
            overflow: auto; /* Permitir desplazamiento */
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(45deg, #ff6b6b, #ff3d3d);
            padding: 10px 20px;
            border-bottom: 4px solid #ffdd40;
            z-index: 10; /* Asegura que la barra esté siempre encima */
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            color: #fff !important;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
            transition: color 0.2s ease-in-out; /* Añadida la transición aquí */
        }

        .navbar-brand:hover {
            color: #000 !important;
        }

        .navbar-brand img {
            margin-right: 15px;
            border-radius: 0;
        }

        /* [Resto del código CSS sin cambios] */
        .nav-link {
            color: #ffffff !important;
            font-weight: 600;
            margin-right: 15px;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #ffdd40 !important;
        }

        .nav-link::after {
            content: '';
            width: 0%;
            height: 3px;
            background-color: #ffdd40;
            position: absolute;
            bottom: -5px;
            left: 0;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .dropdown-menu {
            background-color: #cc3f33;
            border: none;
            border-radius: 10px;
        }

        .dropdown-item {
            color: #ffffff;
            transition: background-color 0.3s ease;
        }

        .dropdown-item:hover {
            background-color: #ff7f50;
            color: #ffffff;
        }

        /* Contenedor principal */
        .container {
            margin-top: 80px; /* Ajusta el margen superior para evitar el solapamiento */
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0px 12px 30px rgba(0, 0, 0, 0.5);
            border: 5px solid rgba(255, 255, 255, 0.7);
            position: relative;
            z-index: 1;
            width: 90%;
            max-width: 600px;
            text-align: center;
            box-sizing: border-box;
            overflow: hidden;
            height: auto;
        }


        /* Detalles de colores en las esquinas */
        .container::before, .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 15px; /* Esquinas redondeadas para pseudo-elementos */
            z-index: -1; /* Colocar detrás del contenedor */
            background: linear-gradient(135deg, rgba(255, 78, 78, 0.2), rgba(249, 212, 35, 0.2)); /* Fondo degradado */
            filter: blur(25px); /* Efecto de desenfoque para el fondo */
        }

        /* Texto en los contenedores */
        h1, h2, h3, p {
            color: #333; /* Color del texto oscuro */
            text-shadow: 1px 1px 5px rgba(255, 255, 255, 0.8); /* Sombra de texto más suave */
            margin: 10px 0; /* Ajustar margen superior e inferior */
        }

        /* SVG estilos */
        svg {
            margin-top: 10px; /* Reducir espacio entre SVG y otros elementos */
            max-width: 100%; /* SVG responsivo */
            height: auto; /* Mantener proporción */
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="https://ecastro4.github.io">
                <img src="logo.png" alt="Logo" width="50">
                Web d'Eric
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Inici</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Tema 1</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Programació p5.js
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="https://ecastro4.github.io/cara">Cara interactiva</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/ocell">Ocell</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/wepray">We Pray</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/coldplay">Coldplay</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Braç robòtic
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown2">
                            <a class="dropdown-item" href="https://ecastro4.github.io/robotica/cdirecta">Cinemàtica directa</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/robotica/cinversa">Cinemàtica inversa</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Tema 2</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <h1>SVG Audio Visualizer</h1>
        <div class="controls">
            <label for="songSelect">Choose Song:</label>
            <select id="songSelect">
                <option value="song1">Good Feelings</option>
                <option value="song2">Song 2</option>
                <!-- Easily add more songs here -->
            </select>
            <br><br>
            <input type="file" id="audioFile" accept="audio/*">
            <br><br>
            <audio id="audioPlayer" controls></audio>
        </div>

    <svg id="svgVisualizer" width="400" height="400" viewBox="0 0 100 100">
        <g id="coldplay1" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 6.484375 0.191406 C -2.53125 -0.679688 -1.636719 11.554688 6.035156 10.199219 C 3.070312 9.28125 1.988281 7.316406 2.027344 5.261719 C 2.1875 2.601562 3.398438 1.171875 6.484375 0.191406 Z M 6.484375 0.191406 "/>
            <path d="M 21.96875 5.242188 C 21.96875 2.347656 19.550781 0 16.566406 0 C 13.582031 0 11.164062 2.347656 11.164062 5.242188 C 11.164062 8.140625 13.582031 10.488281 16.566406 10.488281 C 19.550781 10.488281 21.96875 8.140625 21.96875 5.242188 Z M 21.96875 5.242188 "/>
            <path d="M 40.976562 0.417969 C 46.726562 3.878906 44.539062 8.96875 40.882812 10.359375 C 49.652344 11.398438 49.847656 -0.496094 40.976562 0.417969 Z M 40.976562 0.417969 "/>
            <path d="M 28.796875 0.769531 C 22.613281 6.183594 31.28125 13.558594 35.816406 8.113281 C 32.449219 10.523438 25.0625 7.371094 28.796875 0.769531 Z M 28.796875 0.769531 "/>
            <path d="M 52.101562 2.949219 C 57.777344 -3.421875 65.484375 5.554688 59.316406 10.070312 C 61.675781 5.960938 58.074219 0.195312 52.101562 2.949219 Z M 52.101562 2.949219 "/>
            <path d="M 68.003906 1.21875 C 62.207031 6.25 70.796875 13.847656 75.152344 8.308594 C 70.707031 11 65.160156 6.925781 68.003906 1.21875 Z M 68.003906 1.21875 "/>
            <path d="M 79.738281 7.121094 C 78.707031 -0.320312 89.859375 -1.390625 89.769531 7.25 C 88.316406 3.441406 82.785156 0.753906 79.738281 7.121094 Z M 79.738281 7.121094 "/>
            <path d="M 93.617188 1.058594 C 101.425781 0.101562 101.820312 11.902344 93.90625 10.9375 C 98.554688 9.375 99.34375 3.324219 93.617188 1.058594 Z M 93.617188 1.058594 "/>
            <path d="M 103.042969 2.742188 C 103.042969 1.792969 102.269531 1.027344 101.3125 1.027344 C 100.355469 1.027344 99.582031 1.792969 99.582031 2.742188 C 99.582031 3.691406 100.355469 4.457031 101.3125 4.457031 C 102.269531 4.457031 103.042969 3.691406 103.042969 2.742188 Z M 103.042969 2.742188 "/>
        </g>
        <g id="diamont" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 48.09375 18.796875 L 32.945312 18.890625 L 31.820312 20.015625 C 30.070312 21.75 25.445312 26.492188 22.804688 29.257812 C 17.5 34.8125 11.273438 41.570312 11.148438 41.882812 C 11.101562 42.03125 11.375 42.335938 13.296875 44.203125 C 16.046875 46.875 17.640625 48.476562 28.109375 59.101562 C 41.515625 72.703125 50.0625 81.171875 50.382812 81.171875 C 50.476562 81.171875 51.007812 80.664062 51.804688 79.820312 C 55.65625 75.757812 60.859375 70.34375 69.140625 61.796875 C 82.601562 47.914062 88.75 41.414062 88.75 41.078125 C 88.75 40.960938 86.820312 38.976562 82.484375 34.617188 C 79.03125 31.15625 75.242188 27.296875 74.0625 26.054688 C 69.53125 21.273438 67.507812 19.320312 66.609375 18.867188 C 66.234375 18.679688 66.171875 18.671875 64.734375 18.6875 C 63.914062 18.6875 56.421875 18.742188 48.09375 18.796875 Z M 66.296875 23.96875 C 69.695312 27.164062 81.117188 39.085938 80.929688 39.25 C 80.914062 39.265625 76.835938 39.304688 71.875 39.328125 L 62.851562 39.382812 L 62.273438 37.992188 C 60.304688 33.25 57.757812 27.398438 56.367188 24.429688 C 55.992188 23.625 55.695312 22.953125 55.710938 22.929688 C 55.726562 22.914062 57.273438 22.867188 59.140625 22.8125 C 61.007812 22.765625 62.609375 22.71875 62.695312 22.703125 C 62.78125 22.6875 63.3125 22.671875 63.875 22.664062 L 64.898438 22.65625 Z M 50.90625 22.859375 L 51.304688 22.90625 L 51.601562 23.625 C 51.765625 24.015625 52.882812 26.546875 54.085938 29.257812 C 56.132812 33.882812 57.65625 37.40625 58.1875 38.75 L 58.421875 39.335938 L 58.171875 39.390625 C 58.039062 39.421875 54.359375 39.453125 50 39.460938 C 45.640625 39.46875 41.929688 39.476562 41.757812 39.484375 C 41.585938 39.484375 41.453125 39.453125 41.460938 39.414062 C 41.5 39.179688 47.132812 25.84375 48.085938 23.71875 L 48.546875 22.710938 L 49.523438 22.765625 C 50.0625 22.789062 50.6875 22.835938 50.90625 22.859375 Z M 43.835938 23.140625 C 43.46875 24.078125 37.078125 39.429688 37.039062 39.476562 C 36.976562 39.539062 18.835938 39.6875 18.75 39.625 C 18.648438 39.554688 19.007812 39.140625 19.53125 38.742188 C 20.289062 38.15625 21.179688 37.210938 29.171875 28.554688 C 30.164062 27.476562 31.78125 25.78125 32.765625 24.78125 L 34.554688 22.96875 L 43.90625 22.96875 Z M 81.25 43.421875 C 81.25 43.5 80.851562 43.867188 80.40625 44.210938 C 79.9375 44.570312 74.023438 50.703125 67.703125 57.382812 C 63.585938 61.734375 58.195312 67.257812 55.804688 69.585938 C 54.671875 70.679688 53.75 71.5625 53.75 71.539062 C 53.75 71.476562 60.429688 51.664062 61.195312 49.453125 C 62.070312 46.921875 63.265625 43.585938 63.3125 43.53125 C 63.335938 43.515625 67.09375 43.46875 71.65625 43.4375 C 76.226562 43.414062 80.25 43.382812 80.609375 43.375 C 80.960938 43.367188 81.25 43.390625 81.25 43.421875 Z M 58.625 43.882812 C 58.101562 45.632812 57.164062 48.507812 55.992188 51.992188 C 53.789062 58.5 51.132812 66.476562 50.679688 67.921875 L 50.265625 69.25 L 50.046875 68.664062 C 48.382812 64.234375 41.34375 44.320312 41.226562 43.71875 C 41.21875 43.65625 42.9375 43.625 47.890625 43.59375 C 51.5625 43.570312 55.507812 43.546875 56.65625 43.53125 L 58.734375 43.515625 Z M 37.21875 44.742188 C 40.101562 52.96875 46.460938 70.945312 46.710938 71.59375 L 46.796875 71.8125 L 46.546875 71.601562 C 44.90625 70.234375 37.757812 63.140625 31.007812 56.171875 C 28.53125 53.617188 24.78125 49.8125 22.664062 47.71875 L 18.828125 43.914062 L 19.234375 43.867188 C 20.257812 43.75 23.210938 43.695312 29.765625 43.6875 L 36.835938 43.671875 Z M 37.21875 44.742188 "/>
        /></g>
    
        <g id="good" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 95.878906 58.546875 L 95.886719 58.550781 L 84.78125 90.585938 L 84.746094 90.574219 C 83.042969 94.550781 79.179688 97.332031 74.675781 97.332031 L 43.863281 97.332031 C 41.433594 97.332031 39.460938 95.3125 39.460938 92.820312 C 39.460938 90.328125 41.433594 88.308594 43.863281 88.308594 L 63.894531 88.308594 C 63.890625 88.300781 63.894531 88.296875 63.890625 88.292969 L 74.617188 88.292969 C 74.636719 88.296875 74.65625 88.308594 74.675781 88.308594 C 75.625 88.308594 76.417969 87.683594 76.726562 86.816406 L 76.757812 86.792969 L 87.367188 56.191406 L 87.347656 56.164062 C 87.679688 55.285156 87.882812 54.335938 87.882812 53.332031 C 87.882812 49 84.476562 45.488281 80.257812 45.445312 L 80.191406 45.34375 L 80.191406 45.433594 L 67.949219 45.433594 C 62.703125 45.433594 60.316406 41.371094 61.964844 37.703125 C 63.617188 34.039062 63.671875 18.871094 63.671875 18.359375 L 63.671875 16.101562 C 63.671875 13.609375 61.699219 11.589844 59.269531 11.589844 C 56.839844 11.589844 54.867188 13.609375 54.867188 16.101562 L 54.867188 18.359375 C 54.867188 33.019531 44.363281 45.132812 30.65625 47.308594 L 30.65625 92.820312 C 30.65625 95.3125 28.6875 97.332031 26.257812 97.332031 L 8.648438 97.332031 C 6.21875 97.332031 4.246094 95.3125 4.246094 92.820312 L 4.246094 43.179688 C 4.246094 40.6875 6.21875 38.667969 8.648438 38.667969 L 26.257812 38.667969 C 37.195312 38.667969 46.0625 29.574219 46.0625 18.359375 L 46.0625 16.101562 C 46.0625 8.625 51.976562 2.5625 59.269531 2.5625 C 66.5625 2.5625 72.476562 8.625 72.476562 16.101562 L 72.476562 18.359375 C 72.476562 20.691406 71.976562 34.234375 71.472656 36.410156 L 80.179688 36.410156 C 89.292969 36.410156 96.683594 43.984375 96.683594 53.332031 C 96.683594 55.152344 96.398438 56.902344 95.878906 58.546875 Z M 21.855469 47.691406 L 13.050781 47.691406 L 13.050781 88.308594 L 21.855469 88.308594 Z M 21.855469 47.691406 "/>
            <path d="M 26.519531 88.304688 L 44.242188 88.304688 L 44.242188 97.332031 L 26.519531 97.332031 Z M 26.519531 88.304688 "/>
        </g>
        <g id="meditate" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 63.90625 14.246094 C 63.90625 6.378906 57.527344 0 49.660156 0 C 41.792969 0 35.414062 6.378906 35.414062 14.246094 C 35.414062 22.113281 41.792969 28.488281 49.660156 28.488281 C 57.527344 28.488281 63.90625 22.113281 63.90625 14.246094 Z M 63.90625 14.246094 "/>
            <path d="M 91.679688 76.734375 C 84.808594 60.609375 60.460938 35.726562 59.988281 35.417969 C 57.539062 32.773438 53.957031 31.476562 50.339844 31.425781 L 50.339844 31.414062 C 50.339844 31.414062 49.660156 31.414062 49.660156 31.414062 L 49.660156 31.425781 C 46.042969 31.480469 42.460938 32.777344 40.011719 35.417969 C 39.539062 35.726562 15.1875 60.609375 8.320312 76.734375 C 6.640625 80.679688 8.210938 84.390625 10.84375 86.582031 C 10.191406 88.742188 10.175781 91.160156 10.910156 93.488281 C 12.167969 97.503906 15.421875 100 19.398438 100 C 27.007812 100 72.945312 100 80.597656 100 C 84.574219 100 87.828125 97.503906 89.085938 93.488281 C 89.820312 91.160156 89.804688 88.742188 89.152344 86.582031 C 91.789062 84.390625 93.359375 80.679688 91.679688 76.734375 Z M 27.003906 74.195312 C 29.925781 69.421875 33.257812 65.054688 36.875 60.855469 C 36.875 65.1875 37 76.023438 37.21875 77.007812 C 36.484375 76.820312 29.660156 75.101562 27.003906 74.195312 Z M 62.78125 77.007812 C 63 76.023438 63.125 65.1875 63.125 60.855469 C 66.746094 65.054688 70.078125 69.421875 72.996094 74.195312 C 70.34375 75.101562 63.519531 76.820312 62.78125 77.007812 Z M 62.78125 77.007812 "/>
        </g>
        <g id="dance" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 52.855469 15.320312 C 52.855469 10.660156 49.078125 6.882812 44.417969 6.882812 C 39.757812 6.882812 35.980469 10.660156 35.980469 15.320312 C 35.980469 19.980469 39.757812 23.757812 44.417969 23.757812 C 49.078125 23.757812 52.855469 19.980469 52.855469 15.320312 Z M 52.855469 15.320312 "/>
            <path d="M 5.761719 93.554688 L 94.238281 93.554688 C 97.421875 93.554688 100 91.035156 100 87.921875 C 100 84.808594 97.421875 82.285156 94.238281 82.285156 L 67.21875 82.285156 C 67.375 82.226562 67.535156 82.175781 67.691406 82.085938 C 69.011719 81.285156 69.4375 79.5625 68.636719 78.238281 L 52.855469 52.117188 L 52.855469 39.21875 C 60.039062 45.703125 63.511719 56.085938 63.574219 56.273438 C 63.960938 57.460938 65.058594 58.214844 66.242188 58.214844 C 66.523438 58.214844 66.816406 58.171875 67.101562 58.078125 C 68.574219 57.605469 69.382812 56.023438 68.90625 54.554688 C 68.667969 53.828125 63.820312 39.183594 52.847656 32.179688 C 52.804688 28.351562 49.695312 25.261719 45.855469 25.261719 L 42.980469 25.261719 C 41.136719 25.261719 39.472656 25.988281 38.222656 27.152344 C 29.597656 20.996094 25.449219 8.59375 25.378906 8.386719 C 24.902344 6.917969 23.328125 6.105469 21.855469 6.582031 C 20.382812 7.058594 19.574219 8.636719 20.050781 10.109375 C 20.285156 10.832031 25.097656 25.367188 35.976562 32.40625 L 35.976562 54.820312 L 30.550781 64.339844 C 30.105469 65.117188 30.0625 66.058594 30.433594 66.878906 L 36.730469 80.839844 C 37.050781 81.546875 37.632812 82.035156 38.304688 82.285156 L 5.761719 82.285156 C 2.578125 82.285156 0 84.808594 0 87.921875 C 0 91.03125 2.578125 93.554688 5.761719 93.554688 Z M 36.121094 65.875 L 41.464844 56.5 L 48.957031 56.5 L 63.839844 81.136719 C 64.179688 81.695312 64.691406 82.074219 65.257812 82.289062 L 40.289062 82.289062 C 40.335938 82.269531 40.386719 82.261719 40.433594 82.242188 C 41.84375 81.605469 42.472656 79.945312 41.835938 78.535156 Z M 36.121094 65.875 "/>
        </g>
        <g id="dream" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 63.703125 0.0859375 C 59.625 0.472656 55.929688 2.128906 53.351562 4.722656 L 52.765625 5.320312 L 52.070312 5.019531 C 49.796875 4.027344 47.726562 3.578125 45.117188 3.507812 C 43.367188 3.460938 42.117188 3.578125 40.546875 3.917969 C 33.867188 5.398438 29.109375 10.339844 29.054688 15.84375 L 29.046875 16.625 L 28.289062 16.804688 C 25.226562 17.53125 22.679688 18.855469 20.671875 20.753906 C 18.203125 23.085938 16.953125 25.835938 16.953125 28.910156 C 16.953125 30.164062 17.085938 31.046875 17.4375 32.136719 C 18.25 34.664062 20.140625 37.039062 22.695312 38.726562 C 24.109375 39.664062 26.296875 40.601562 28.085938 41.035156 L 28.789062 41.207031 L 28.789062 42.382812 C 28.796875 43.171875 28.84375 43.785156 28.929688 44.242188 C 30.03125 49.738281 35.195312 53.914062 42.03125 54.835938 C 42.984375 54.96875 45.773438 54.96875 46.679688 54.84375 C 49.453125 54.457031 51.960938 53.589844 53.90625 52.34375 C 54.164062 52.179688 54.40625 52.039062 54.445312 52.039062 C 54.476562 52.039062 54.710938 52.203125 54.96875 52.394531 C 58.148438 54.859375 62.429688 56.105469 66.726562 55.835938 C 69.304688 55.671875 71.390625 55.136719 73.554688 54.09375 C 76.203125 52.816406 78.335938 50.910156 79.710938 48.59375 C 79.914062 48.253906 79.945312 48.230469 80.179688 48.277344 C 83.234375 48.910156 85.609375 48.933594 88.34375 48.363281 C 94.210938 47.136719 98.757812 43.109375 99.773438 38.230469 C 100.515625 34.664062 99.289062 30.867188 96.539062 28.195312 L 96.023438 27.699219 L 96.171875 27.492188 C 96.5 27.035156 97.203125 25.46875 97.429688 24.703125 C 97.75 23.605469 97.828125 22.992188 97.828125 21.761719 C 97.820312 16.640625 93.9375 12.042969 88.007812 10.121094 C 86.109375 9.503906 84.460938 9.261719 82.21875 9.253906 L 80.492188 9.253906 L 80.3125 8.789062 C 79.570312 6.839844 77.953125 4.800781 75.976562 3.316406 C 72.75 0.898438 68.054688 -0.332031 63.703125 0.0859375 Z M 63.703125 0.0859375 "/>
<path d="M 33.148438 57.191406 C 32.492188 57.335938 31.570312 57.722656 31.070312 58.058594 C 30.09375 58.714844 29.25 59.769531 28.898438 60.789062 C 28.664062 61.488281 28.601562 62.734375 28.78125 63.421875 C 29.1875 64.980469 30.203125 66.1875 31.757812 66.957031 C 34.203125 68.15625 37.226562 67.636719 39.0625 65.699219 C 41.765625 62.851562 40.34375 58.492188 36.328125 57.289062 C 35.65625 57.082031 33.851562 57.027344 33.148438 57.191406 Z M 33.148438 57.191406 "/>
<path d="M 18.796875 70.59375 C 17.335938 70.941406 16.054688 72.214844 15.664062 73.691406 C 15.507812 74.28125 15.515625 75.363281 15.671875 75.898438 C 16.226562 77.78125 17.914062 79.058594 19.84375 79.066406 C 21.835938 79.066406 23.601562 77.609375 24.023438 75.621094 C 24.085938 75.320312 24.140625 74.9375 24.140625 74.769531 C 24.140625 74.234375 23.921875 73.398438 23.625 72.800781 C 22.765625 71.074219 20.710938 70.136719 18.796875 70.59375 Z M 18.796875 70.59375 "/>
<path d="M 7.671875 84.679688 C 7.101562 84.835938 6.867188 84.976562 6.476562 85.363281 C 5.90625 85.929688 5.742188 86.332031 5.742188 87.199219 C 5.742188 87.832031 5.773438 87.996094 5.945312 88.359375 C 6.210938 88.917969 6.640625 89.335938 7.25 89.621094 C 7.65625 89.808594 7.84375 89.847656 8.304688 89.847656 C 9.398438 89.855469 10.242188 89.335938 10.71875 88.375 C 10.945312 87.917969 10.976562 87.785156 10.976562 87.238281 C 10.976562 86.726562 10.9375 86.539062 10.757812 86.144531 C 10.21875 84.984375 8.875 84.347656 7.671875 84.679688 Z M 7.671875 84.679688 "/>
<path d="M 1.445312 95.398438 C 1.054688 95.5 0.75 95.683594 0.445312 96.019531 C -0.492188 97.046875 0.195312 98.777344 1.609375 98.9375 C 2.375 99.03125 3.085938 98.636719 3.453125 97.929688 C 3.78125 97.304688 3.601562 96.34375 3.078125 95.855469 C 2.679688 95.484375 1.9375 95.273438 1.445312 95.398438 Z M 1.445312 95.398438 "/>
</g>
        <g id="monkey" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="m 137.03146,215.2365 c -13.69518,5.66116 -25.08049,3.81524 -35.00804,-2.7684 -9.613716,1.89012 -15.003608,-4.6674 -21.00482,-10.00229 l 1.768173,8.00183 c -7.593238,-1.66481 -10.758976,-7.75712 -14.771158,-13.00298 l 2.768403,9.29502 c -7.775998,-1.3205 -11.632831,-8.51974 -13.770929,-18.29709 l -2.172071,6.94094 c -3.690029,-5.88258 -3.824216,-13.1875 -2.829077,-20.94415 l -6.001378,-5.00115 c -7.933728,7.60745 -18.720262,9.1082 -30.421197,1.64683 C 9.5191865,162.79205 1.871366,167.39983 0,141.4518 c 0.97965848,-6.6682 3.2610947,-11.92186 20.004593,-18.59005 3.897994,1.29126 13.368055,-0.0384 16.003674,6.58729 0.329312,-18.17545 5.135621,-31.314276 13.002985,-41.009415 l -7.001607,4.000918 C 46.328849,86.538938 40.953464,82.6783 61.428316,73.375506 62.959985,73.554059 57.852683,73.732611 54.0124,73.911163 70.122909,59.895172 83.633718,66.676779 98.022504,66.434573 107.75183,55.698578 121.8738,49.794488 141.03238,49.430669 l -6.76932,7.173219 c 4.98733,-3.372855 11.45142,-5.228038 18.24682,-0.464572 l -9.89135,3.758222 c 11.73319,-0.923891 18.80816,4.673732 25.9453,10.184318 l 12.1241,20.590514 c 2.36779,-6.946352 0.0941,-12.100162 16.65027,-20.418901 6.4095,-2.20474 16.99322,-1.933486 22.77299,5.122496 5.86744,5.618215 7.78398,15.798011 6.94094,27.066875 -3.56161,9.77392 -7.90243,18.65676 -14.29618,22.77299 -4.1013,3.7792 -10.78193,4.63191 -17.71117,-1.76817 l 6.00138,25.00575 -4.00092,19.00436 -4.00092,-7.00161 -4.41523,20.12594 -4.70819,-11.17414 c -2.1068,10.99828 -5.01389,16.39456 -8.05209,20.87307 l -0.82862,-11.82074 c -3.09659,11.89013 -10.37093,14.03218 -16.00368,20.0046 -5.33456,5.76957 -13.6698,11.44926 -19.00436,14.50333 -2.29595,29.3729 15.4292,57.35476 24.00551,85.51963 l -40.00919,38.00873 c -16.34371,3.84084 -29.121416,4.11567 -43.00987,5.50126 -10.67187,4.50103 -15.936311,9.00207 -20.004592,13.5031 l 11.002525,2.00046 c 0.507284,-4.06024 3.951076,-7.58656 19.004363,-9.00207 -8.881073,2.03676 -20.780236,3.16809 -17.003903,9.00207 l 57.013087,-1.00023 59.01355,-49.01125 -3.00069,-39.00896 22.00505,27.0062 -22.00505,48.01102 c -20.7766,-0.9709 -38.18318,0.67932 -47.01079,9.00207 l 11.00252,4.00092 20.0046,-9.00207 -21.00483,8.00184 55.01263,3.00069 32.00735,-68.01562 -19.00436,-31.00712 c 11.33594,0.26721 22.67187,-0.29918 34.00781,-4.00091 -8.89259,39.3237 7.71365,45.18019 19.00436,58.01331 l 38.00873,24.00552 c -19.10946,4.3174 -41.49149,-2.27374 -57.01309,14.00321 l 7.0016,5.00115 31.00712,-12.00276 c -10.39002,4.48043 -32.03344,2.0357 -27.0062,16.00368 l 70.01608,-7.00161 c 9.47665,-3.01771 4.92918,-15.38483 3.00069,-26.00597 -26.24928,-15.21171 -18.13373,-39.44969 -43.00988,-44.0101 l 8.00184,-9.00207 c 4.06895,22.7988 52.91839,8.41263 64.0147,28.00643 v 18.00413 c -12.11236,4.37163 -28.05329,8.10517 -25.00575,15.00345 l 8.00184,1.00023 22.00505,-10.0023 -21.00482,8.00184 c 11.47486,0.19449 1.65779,8.23337 36.00827,0 -4.29673,-16.33709 11.31844,-32.67417 3.00069,-49.01126 -26.73561,-12.44278 -24.57138,-35.64924 -51.01171,-35.00803 l -6.00138,-41.00942 2.00046,-17.0039 c 15.32332,-11.2659 11.90702,3.41536 49.01125,-38.00873 6.47868,-13.09774 11.29541,-27.02646 14.00321,-42.00964 C 400.4578,84.979928 391.56122,63.409584 379.08703,43.429291 366.72607,24.205862 346.77404,14.471272 327.07509,4.4203351 306.28495,0.21124607 286.61569,-6.0794846 253.0581,13.422402 c -18.47714,13.950659 -25.45213,29.179334 -27.0062,45.010334 1.50607,14.312207 -1.64319,31.533998 14.00321,37.008496 5.00115,2.402904 10.0023,3.229396 15.00345,0 5.13538,-4.972694 3.2371,-8.94058 2.00046,-13.002985 l -6.00138,-18.004134 c 2.06081,-21.915022 8.31704,-29.845307 16.00367,-33.007577 9.077,-12.918686 26.85454,-16.049267 51.01171,-12.002756 21.58355,9.411677 40.23008,20.12869 45.01034,37.008496 21.37692,33.870122 13.67815,45.933474 14.00321,64.014704 -4.92463,21.31087 -12.31662,32.75236 -21.00482,39.00895 l -28.00643,13.00299 -26.00597,-21.00483 -35.00804,-6.00137 -72.01653,26.00597 c -19.3392,14.60256 -39.60323,35.67902 -58.01332,43.77781 z"
     
        </g>
    </svg>

    <script>
        const fileInput = document.getElementById('audioFile');
        const audioPlayer = document.getElementById('audioPlayer');
        const songSelect = document.getElementById('songSelect');
        const shapes = {
            coldplay1: document.getElementById('coldplay1'),
            diamont: document.getElementById('diamont'),
            good: document.getElementById('good'),
            meditate: document.getElementById('meditate'),
            dance: document.getElementById('dance'),
            dream: document.getElementById('dream'),
            monkey: document.getElementById('monkey')
        };
    
        let audioContext, analyser, frequencyData;
        let currentShapeIndex = 0;
        let cycleTimeout;
        let isInitialized = false; // Asegura que initAudio solo se ejecute una vez
    
        const songConfig = {
            song1: {
                shapeOrder: ['coldplay1', 'diamont', 'good', 'meditate', 'dance', 'dream', 'monkey'],
                durations: [3000, 3000, 3000, 3000, 3000, 3000, 3000]
            },
            song2: {
                shapeOrder: ['monkey', 'dream', 'dance', 'meditate', 'good', 'diamont', 'coldplay1'],
                durations: [5000, 5000, 5000, 5000, 5000, 5000, 5000]
            }
        };
    
        fileInput.addEventListener('change', handleFileUpload);
        songSelect.addEventListener('change', resetVisualizer);
        audioPlayer.addEventListener('play', startCycleShapes);
        audioPlayer.addEventListener('pause', stopCycleShapes);
    
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('audio/')) {
                const audioURL = URL.createObjectURL(file);
                audioPlayer.src = audioURL;
                audioPlayer.load();
                if (!isInitialized) {
                    initAudio();
                }
            } else {
                alert('Please upload a valid audio file.');
            }
        }
    
        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            frequencyData = new Uint8Array(analyser.frequencyBinCount);
    
            const source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
    
            isInitialized = true; // Marca el contexto como inicializado
            visualize();
        }
    
        function visualize() {
            if (audioContext && audioContext.state === 'running') { // Verifica que el contexto esté activo
                requestAnimationFrame(visualize);
                analyser.getByteFrequencyData(frequencyData);
    
                const averageFrequency = frequencyData.reduce((a, b) => a + b) / frequencyData.length;
                const scale = averageFrequency / 255;
    
                const selectedShape = shapes[getCurrentShape()];
                const hue = Math.round((averageFrequency / 255) * 360);
                selectedShape.setAttribute('fill', `hsl(${hue}, 100%, 50%)`);
                selectedShape.setAttribute('transform', `scale(${scale + 0.5})`);
            }
        }
    
        function startCycleShapes() {
            if (!isInitialized) { // Asegura que initAudio se haya ejecutado
                initAudio();
            }
            const songData = songConfig[songSelect.value];
            updateShapeVisibility();
    
            cycleTimeout = setTimeout(() => {
                currentShapeIndex = (currentShapeIndex + 1) % songData.shapeOrder.length;
                if (!audioPlayer.paused) {
                    startCycleShapes();
                }
            }, songData.durations[currentShapeIndex]);
        }
    
        function stopCycleShapes() {
            clearTimeout(cycleTimeout);
        }
    
        function resetVisualizer() {
            clearTimeout(cycleTimeout);
            audioPlayer.currentTime = 0;
            audioPlayer.pause();
            currentShapeIndex = 0;
            updateShapeVisibility();
        }
    
        function getCurrentShape() {
            return songConfig[songSelect.value].shapeOrder[currentShapeIndex];
        }
    
        function updateShapeVisibility() {
            Object.keys(shapes).forEach(key => {
                shapes[key].style.display = key === getCurrentShape() ? 'block' : 'none';
            });
        }
    </script>    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
</body>
</html>
