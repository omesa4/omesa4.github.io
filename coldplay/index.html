
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <title>Coldplay</title>
    <style>
        /* Estilos generales */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff4e50, #f9d423);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Cambiado a flex-start para permitir desplazamiento */
            min-height: 100vh; /* Mínimo de altura completa */
            overflow: auto; /* Permitir desplazamiento */
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(45deg, #ff6b6b, #ff3d3d);
            padding: 10px 20px;
            border-bottom: 4px solid #ffdd40;
            z-index: 10; /* Asegura que la barra esté siempre encima */
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            color: #fff !important;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
            transition: color 0.2s ease-in-out; /* Añadida la transición aquí */
        }

        .navbar-brand:hover {
            color: #000 !important;
        }

        .navbar-brand img {
            margin-right: 15px;
            border-radius: 0;
        }

        /* [Resto del código CSS sin cambios] */
        .nav-link {
            color: #ffffff !important;
            font-weight: 600;
            margin-right: 15px;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #ffdd40 !important;
        }

        .nav-link::after {
            content: '';
            width: 0%;
            height: 3px;
            background-color: #ffdd40;
            position: absolute;
            bottom: -5px;
            left: 0;
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .dropdown-menu {
            background-color: #cc3f33;
            border: none;
            border-radius: 10px;
        }

        .dropdown-item {
            color: #ffffff;
            transition: background-color 0.3s ease;
        }

        .dropdown-item:hover {
            background-color: #ff7f50;
            color: #ffffff;
        }

        /* Contenedor principal */
        .container {
            margin-top: 80px; /* Ajusta el margen superior para evitar el solapamiento */
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0px 12px 30px rgba(0, 0, 0, 0.5);
            border: 5px solid rgba(255, 255, 255, 0.7);
            position: relative;
            z-index: 1;
            width: 90%;
            max-width: 600px;
            text-align: center;
            box-sizing: border-box;
            overflow: hidden;
            height: auto;
        }


        /* Detalles de colores en las esquinas */
        .container::before, .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 15px; /* Esquinas redondeadas para pseudo-elementos */
            z-index: -1; /* Colocar detrás del contenedor */
            background: linear-gradient(135deg, rgba(255, 78, 78, 0.2), rgba(249, 212, 35, 0.2)); /* Fondo degradado */
            filter: blur(25px); /* Efecto de desenfoque para el fondo */
        }

        /* Texto en los contenedores */
        h1, h2, h3, p {
            color: #333; /* Color del texto oscuro */
            text-shadow: 1px 1px 5px rgba(255, 255, 255, 0.8); /* Sombra de texto más suave */
            margin: 10px 0; /* Ajustar margen superior e inferior */
        }

        /* SVG estilos */
        svg {
            margin-top: 10px; /* Reducir espacio entre SVG y otros elementos */
            max-width: 100%; /* SVG responsivo */
            height: auto; /* Mantener proporción */
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="https://ecastro4.github.io">
                <img src="logo.png" alt="Logo" width="50">
                Web d'Eric
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Inici</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Tema 1</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Programació p5.js
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="https://ecastro4.github.io/cara">Cara interactiva</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/ocell">Ocell</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/wepray">We Pray</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/coldplay">Coldplay</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Braç robòtic
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown2">
                            <a class="dropdown-item" href="https://ecastro4.github.io/robotica/cdirecta">Cinemàtica directa</a>
                            <a class="dropdown-item" href="https://ecastro4.github.io/robotica/cinversa">Cinemàtica inversa</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Tema 2</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <h1>SVG Audio Visualizer</h1>
        <div class="controls">
            <label for="songSelect">Choose Song:</label>
            <select id="songSelect">
                <option value="song1">Good Feelings</option>
                <option value="song2">Song 2</option>
                <!-- Easily add more songs here -->
            </select>
            <br><br>
            <input type="file" id="audioFile" accept="audio/*">
            <br><br>
            <audio id="audioPlayer" controls></audio>
        </div>

    <svg id="svgVisualizer" width="400" height="400" viewBox="0 0 100 100">
        <g id="coldplay1" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 6.484375 0.191406 C -2.53125 -0.679688 -1.636719 11.554688 6.035156 10.199219 C 3.070312 9.28125 1.988281 7.316406 2.027344 5.261719 C 2.1875 2.601562 3.398438 1.171875 6.484375 0.191406 Z M 6.484375 0.191406 "/>
            <path d="M 21.96875 5.242188 C 21.96875 2.347656 19.550781 0 16.566406 0 C 13.582031 0 11.164062 2.347656 11.164062 5.242188 C 11.164062 8.140625 13.582031 10.488281 16.566406 10.488281 C 19.550781 10.488281 21.96875 8.140625 21.96875 5.242188 Z M 21.96875 5.242188 "/>
            <path d="M 40.976562 0.417969 C 46.726562 3.878906 44.539062 8.96875 40.882812 10.359375 C 49.652344 11.398438 49.847656 -0.496094 40.976562 0.417969 Z M 40.976562 0.417969 "/>
            <path d="M 28.796875 0.769531 C 22.613281 6.183594 31.28125 13.558594 35.816406 8.113281 C 32.449219 10.523438 25.0625 7.371094 28.796875 0.769531 Z M 28.796875 0.769531 "/>
            <path d="M 52.101562 2.949219 C 57.777344 -3.421875 65.484375 5.554688 59.316406 10.070312 C 61.675781 5.960938 58.074219 0.195312 52.101562 2.949219 Z M 52.101562 2.949219 "/>
            <path d="M 68.003906 1.21875 C 62.207031 6.25 70.796875 13.847656 75.152344 8.308594 C 70.707031 11 65.160156 6.925781 68.003906 1.21875 Z M 68.003906 1.21875 "/>
            <path d="M 79.738281 7.121094 C 78.707031 -0.320312 89.859375 -1.390625 89.769531 7.25 C 88.316406 3.441406 82.785156 0.753906 79.738281 7.121094 Z M 79.738281 7.121094 "/>
            <path d="M 93.617188 1.058594 C 101.425781 0.101562 101.820312 11.902344 93.90625 10.9375 C 98.554688 9.375 99.34375 3.324219 93.617188 1.058594 Z M 93.617188 1.058594 "/>
            <path d="M 103.042969 2.742188 C 103.042969 1.792969 102.269531 1.027344 101.3125 1.027344 C 100.355469 1.027344 99.582031 1.792969 99.582031 2.742188 C 99.582031 3.691406 100.355469 4.457031 101.3125 4.457031 C 102.269531 4.457031 103.042969 3.691406 103.042969 2.742188 Z M 103.042969 2.742188 "/>
        </g>
        <g id="lemonade" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 30.183594 89.089844 C 30.320312 89.820312 30.644531 90.441406 31.15625 90.957031 C 31.78125 91.457031 32.375 91.75 32.953125 91.875 L 62.113281 91.957031 C 62.480469 91.960938 63.566406 91.582031 64.136719 90.964844 C 64.558594 90.515625 64.84375 89.9375 64.90625 89.367188 L 69.609375 46.890625 C 58.914062 36.121094 60.101562 35.765625 53.074219 28.886719 L 29.746094 28.945312 L 17.398438 3.324219 L 14.011719 4.957031 L 25.617188 29.207031 C 25.09375 29.371094 24.648438 29.71875 24.222656 30.128906 C 23.644531 30.695312 23.492188 31.242188 23.390625 31.789062 Z M 30.183594 89.089844 "/>
            <path d="M 86.011719 30.550781 C 86.011719 21.433594 78.59375 14.039062 69.445312 14.039062 C 60.300781 14.039062 52.882812 21.433594 52.882812 30.550781 C 52.882812 39.671875 60.300781 47.0625 69.445312 47.0625 C 78.59375 47.0625 86.011719 39.671875 86.011719 30.550781 Z M 86.011719 30.550781 "/>
        </g>
        <g id="good" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 95.878906 58.546875 L 95.886719 58.550781 L 84.78125 90.585938 L 84.746094 90.574219 C 83.042969 94.550781 79.179688 97.332031 74.675781 97.332031 L 43.863281 97.332031 C 41.433594 97.332031 39.460938 95.3125 39.460938 92.820312 C 39.460938 90.328125 41.433594 88.308594 43.863281 88.308594 L 63.894531 88.308594 C 63.890625 88.300781 63.894531 88.296875 63.890625 88.292969 L 74.617188 88.292969 C 74.636719 88.296875 74.65625 88.308594 74.675781 88.308594 C 75.625 88.308594 76.417969 87.683594 76.726562 86.816406 L 76.757812 86.792969 L 87.367188 56.191406 L 87.347656 56.164062 C 87.679688 55.285156 87.882812 54.335938 87.882812 53.332031 C 87.882812 49 84.476562 45.488281 80.257812 45.445312 L 80.191406 45.34375 L 80.191406 45.433594 L 67.949219 45.433594 C 62.703125 45.433594 60.316406 41.371094 61.964844 37.703125 C 63.617188 34.039062 63.671875 18.871094 63.671875 18.359375 L 63.671875 16.101562 C 63.671875 13.609375 61.699219 11.589844 59.269531 11.589844 C 56.839844 11.589844 54.867188 13.609375 54.867188 16.101562 L 54.867188 18.359375 C 54.867188 33.019531 44.363281 45.132812 30.65625 47.308594 L 30.65625 92.820312 C 30.65625 95.3125 28.6875 97.332031 26.257812 97.332031 L 8.648438 97.332031 C 6.21875 97.332031 4.246094 95.3125 4.246094 92.820312 L 4.246094 43.179688 C 4.246094 40.6875 6.21875 38.667969 8.648438 38.667969 L 26.257812 38.667969 C 37.195312 38.667969 46.0625 29.574219 46.0625 18.359375 L 46.0625 16.101562 C 46.0625 8.625 51.976562 2.5625 59.269531 2.5625 C 66.5625 2.5625 72.476562 8.625 72.476562 16.101562 L 72.476562 18.359375 C 72.476562 20.691406 71.976562 34.234375 71.472656 36.410156 L 80.179688 36.410156 C 89.292969 36.410156 96.683594 43.984375 96.683594 53.332031 C 96.683594 55.152344 96.398438 56.902344 95.878906 58.546875 Z M 21.855469 47.691406 L 13.050781 47.691406 L 13.050781 88.308594 L 21.855469 88.308594 Z M 21.855469 47.691406 "/>
            <path d="M 26.519531 88.304688 L 44.242188 88.304688 L 44.242188 97.332031 L 26.519531 97.332031 Z M 26.519531 88.304688 "/>
        </g>
        <g id="meditate" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 63.90625 14.246094 C 63.90625 6.378906 57.527344 0 49.660156 0 C 41.792969 0 35.414062 6.378906 35.414062 14.246094 C 35.414062 22.113281 41.792969 28.488281 49.660156 28.488281 C 57.527344 28.488281 63.90625 22.113281 63.90625 14.246094 Z M 63.90625 14.246094 "/>
            <path d="M 91.679688 76.734375 C 84.808594 60.609375 60.460938 35.726562 59.988281 35.417969 C 57.539062 32.773438 53.957031 31.476562 50.339844 31.425781 L 50.339844 31.414062 C 50.339844 31.414062 49.660156 31.414062 49.660156 31.414062 L 49.660156 31.425781 C 46.042969 31.480469 42.460938 32.777344 40.011719 35.417969 C 39.539062 35.726562 15.1875 60.609375 8.320312 76.734375 C 6.640625 80.679688 8.210938 84.390625 10.84375 86.582031 C 10.191406 88.742188 10.175781 91.160156 10.910156 93.488281 C 12.167969 97.503906 15.421875 100 19.398438 100 C 27.007812 100 72.945312 100 80.597656 100 C 84.574219 100 87.828125 97.503906 89.085938 93.488281 C 89.820312 91.160156 89.804688 88.742188 89.152344 86.582031 C 91.789062 84.390625 93.359375 80.679688 91.679688 76.734375 Z M 27.003906 74.195312 C 29.925781 69.421875 33.257812 65.054688 36.875 60.855469 C 36.875 65.1875 37 76.023438 37.21875 77.007812 C 36.484375 76.820312 29.660156 75.101562 27.003906 74.195312 Z M 62.78125 77.007812 C 63 76.023438 63.125 65.1875 63.125 60.855469 C 66.746094 65.054688 70.078125 69.421875 72.996094 74.195312 C 70.34375 75.101562 63.519531 76.820312 62.78125 77.007812 Z M 62.78125 77.007812 "/>
        </g>
        <g id="dance" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 52.855469 15.320312 C 52.855469 10.660156 49.078125 6.882812 44.417969 6.882812 C 39.757812 6.882812 35.980469 10.660156 35.980469 15.320312 C 35.980469 19.980469 39.757812 23.757812 44.417969 23.757812 C 49.078125 23.757812 52.855469 19.980469 52.855469 15.320312 Z M 52.855469 15.320312 "/>
            <path d="M 5.761719 93.554688 L 94.238281 93.554688 C 97.421875 93.554688 100 91.035156 100 87.921875 C 100 84.808594 97.421875 82.285156 94.238281 82.285156 L 67.21875 82.285156 C 67.375 82.226562 67.535156 82.175781 67.691406 82.085938 C 69.011719 81.285156 69.4375 79.5625 68.636719 78.238281 L 52.855469 52.117188 L 52.855469 39.21875 C 60.039062 45.703125 63.511719 56.085938 63.574219 56.273438 C 63.960938 57.460938 65.058594 58.214844 66.242188 58.214844 C 66.523438 58.214844 66.816406 58.171875 67.101562 58.078125 C 68.574219 57.605469 69.382812 56.023438 68.90625 54.554688 C 68.667969 53.828125 63.820312 39.183594 52.847656 32.179688 C 52.804688 28.351562 49.695312 25.261719 45.855469 25.261719 L 42.980469 25.261719 C 41.136719 25.261719 39.472656 25.988281 38.222656 27.152344 C 29.597656 20.996094 25.449219 8.59375 25.378906 8.386719 C 24.902344 6.917969 23.328125 6.105469 21.855469 6.582031 C 20.382812 7.058594 19.574219 8.636719 20.050781 10.109375 C 20.285156 10.832031 25.097656 25.367188 35.976562 32.40625 L 35.976562 54.820312 L 30.550781 64.339844 C 30.105469 65.117188 30.0625 66.058594 30.433594 66.878906 L 36.730469 80.839844 C 37.050781 81.546875 37.632812 82.035156 38.304688 82.285156 L 5.761719 82.285156 C 2.578125 82.285156 0 84.808594 0 87.921875 C 0 91.03125 2.578125 93.554688 5.761719 93.554688 Z M 36.121094 65.875 L 41.464844 56.5 L 48.957031 56.5 L 63.839844 81.136719 C 64.179688 81.695312 64.691406 82.074219 65.257812 82.289062 L 40.289062 82.289062 C 40.335938 82.269531 40.386719 82.261719 40.433594 82.242188 C 41.84375 81.605469 42.472656 79.945312 41.835938 78.535156 Z M 36.121094 65.875 "/>
        </g>
        <g id="dream" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M8154 12769 c-522 -50 -995 -264 -1325 -599 l-75 -77 -89 39 c-291 128 -556 186 -890 195 -224 6 -384 -9 -585 -53 -855 -191 -1464 -829 -1471 -1540 l-1 -101 -97 -23 c-392 -94 -718 -265 -975 -510 -316 -301 -476 -656 -476 -1053 0 -162 17 -276 62 -417 104 -326 346 -633 673 -851 181 -121 461 -242 690 -298 l90 -22 0 -152 c1 -102 7 -181 18 -240 141 -710 802 -1249 1677 -1368 122 -17 479 -17 595 -1 355 50 676 162 925 323 33 21 64 39 69 39 4 0 34 -21 67 -46 407 -318 955 -479 1505 -444 330 21 597 90 874 225 339 165 612 411 788 710 26 44 30 47 60 41 391 -82 695 -85 1045 -11 751 158 1333 678 1463 1308 95 461 -62 951 -414 1296 l-66 64 19 27 c42 59 132 261 161 360 41 142 51 221 51 380 -1 661 -498 1255 -1257 1503 -243 80 -454 111 -741 112 l-221 0 -23 60 c-95 252 -302 515 -555 707 -413 312 -1014 471 -1571 417z"/>
            <path d="M4243 5395 c-84 -19 -202 -69 -266 -112 -125 -85 -233 -221 -278 -353 -30 -90 -38 -251 -15 -340 52 -201 182 -357 381 -456 313 -155 700 -88 935 162 346 368 164 931 -350 1086 -86 27 -317 34 -407 13z"/>
            <path d="M2406 3664 c-187 -45 -351 -209 -401 -400 -20 -76 -19 -216 1 -285 71 -243 287 -408 534 -409 255 0 481 188 535 445 8 39 15 88 15 110 0 69 -28 177 -66 254 -110 223 -373 344 -618 285z"/>
            <path d="M982 1845 c-73 -20 -103 -38 -153 -88 -73 -73 -94 -125 -94 -237 0 -82 4 -103 26 -150 34 -72 89 -126 167 -163 52 -24 76 -29 135 -29 140 -1 248 66 309 190 29 59 33 76 33 147 0 66 -5 90 -28 141 -69 150 -241 232 -395 189z"/>
            <path d="M185 461 c-50 -13 -89 -37 -128 -80 -120 -133 -32 -356 149 -377 98 -12 189 39 236 130 42 81 19 205 -48 268 -51 48 -146 75 -209 59z"/>
        </g>
        <g id="monkey" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="m 137.03146,215.2365 c -13.69518,5.66116 -25.08049,3.81524 -35.00804,-2.7684 -9.613716,1.89012 -15.003608,-4.6674 -21.00482,-10.00229 l 1.768173,8.00183 c -7.593238,-1.66481 -10.758976,-7.75712 -14.771158,-13.00298 l 2.768403,9.29502 c -7.775998,-1.3205 -11.632831,-8.51974 -13.770929,-18.29709 l -2.172071,6.94094 c -3.690029,-5.88258 -3.824216,-13.1875 -2.829077,-20.94415 l -6.001378,-5.00115 c -7.933728,7.60745 -18.720262,9.1082 -30.421197,1.64683 C 9.5191865,162.79205 1.871366,167.39983 0,141.4518 c 0.97965848,-6.6682 3.2610947,-11.92186 20.004593,-18.59005 3.897994,1.29126 13.368055,-0.0384 16.003674,6.58729 0.329312,-18.17545 5.135621,-31.314276 13.002985,-41.009415 l -7.001607,4.000918 C 46.328849,86.538938 40.953464,82.6783 61.428316,73.375506 62.959985,73.554059 57.852683,73.732611 54.0124,73.911163 70.122909,59.895172 83.633718,66.676779 98.022504,66.434573 107.75183,55.698578 121.8738,49.794488 141.03238,49.430669 l -6.76932,7.173219 c 4.98733,-3.372855 11.45142,-5.228038 18.24682,-0.464572 l -9.89135,3.758222 c 11.73319,-0.923891 18.80816,4.673732 25.9453,10.184318 l 12.1241,20.590514 c 2.36779,-6.946352 0.0941,-12.100162 16.65027,-20.418901 6.4095,-2.20474 16.99322,-1.933486 22.77299,5.122496 5.86744,5.618215 7.78398,15.798011 6.94094,27.066875 -3.56161,9.77392 -7.90243,18.65676 -14.29618,22.77299 -4.1013,3.7792 -10.78193,4.63191 -17.71117,-1.76817 l 6.00138,25.00575 -4.00092,19.00436 -4.00092,-7.00161 -4.41523,20.12594 -4.70819,-11.17414 c -2.1068,10.99828 -5.01389,16.39456 -8.05209,20.87307 l -0.82862,-11.82074 c -3.09659,11.89013 -10.37093,14.03218 -16.00368,20.0046 -5.33456,5.76957 -13.6698,11.44926 -19.00436,14.50333 -2.29595,29.3729 15.4292,57.35476 24.00551,85.51963 l -40.00919,38.00873 c -16.34371,3.84084 -29.121416,4.11567 -43.00987,5.50126 -10.67187,4.50103 -15.936311,9.00207 -20.004592,13.5031 l 11.002525,2.00046 c 0.507284,-4.06024 3.951076,-7.58656 19.004363,-9.00207 -8.881073,2.03676 -20.780236,3.16809 -17.003903,9.00207 l 57.013087,-1.00023 59.01355,-49.01125 -3.00069,-39.00896 22.00505,27.0062 -22.00505,48.01102 c -20.7766,-0.9709 -38.18318,0.67932 -47.01079,9.00207 l 11.00252,4.00092 20.0046,-9.00207 -21.00483,8.00184 55.01263,3.00069 32.00735,-68.01562 -19.00436,-31.00712 c 11.33594,0.26721 22.67187,-0.29918 34.00781,-4.00091 -8.89259,39.3237 7.71365,45.18019 19.00436,58.01331 l 38.00873,24.00552 c -19.10946,4.3174 -41.49149,-2.27374 -57.01309,14.00321 l 7.0016,5.00115 31.00712,-12.00276 c -10.39002,4.48043 -32.03344,2.0357 -27.0062,16.00368 l 70.01608,-7.00161 c 9.47665,-3.01771 4.92918,-15.38483 3.00069,-26.00597 -26.24928,-15.21171 -18.13373,-39.44969 -43.00988,-44.0101 l 8.00184,-9.00207 c 4.06895,22.7988 52.91839,8.41263 64.0147,28.00643 v 18.00413 c -12.11236,4.37163 -28.05329,8.10517 -25.00575,15.00345 l 8.00184,1.00023 22.00505,-10.0023 -21.00482,8.00184 c 11.47486,0.19449 1.65779,8.23337 36.00827,0 -4.29673,-16.33709 11.31844,-32.67417 3.00069,-49.01126 -26.73561,-12.44278 -24.57138,-35.64924 -51.01171,-35.00803 l -6.00138,-41.00942 2.00046,-17.0039 c 15.32332,-11.2659 11.90702,3.41536 49.01125,-38.00873 6.47868,-13.09774 11.29541,-27.02646 14.00321,-42.00964 C 400.4578,84.979928 391.56122,63.409584 379.08703,43.429291 366.72607,24.205862 346.77404,14.471272 327.07509,4.4203351 306.28495,0.21124607 286.61569,-6.0794846 253.0581,13.422402 c -18.47714,13.950659 -25.45213,29.179334 -27.0062,45.010334 1.50607,14.312207 -1.64319,31.533998 14.00321,37.008496 5.00115,2.402904 10.0023,3.229396 15.00345,0 5.13538,-4.972694 3.2371,-8.94058 2.00046,-13.002985 l -6.00138,-18.004134 c 2.06081,-21.915022 8.31704,-29.845307 16.00367,-33.007577 9.077,-12.918686 26.85454,-16.049267 51.01171,-12.002756 21.58355,9.411677 40.23008,20.12869 45.01034,37.008496 21.37692,33.870122 13.67815,45.933474 14.00321,64.014704 -4.92463,21.31087 -12.31662,32.75236 -21.00482,39.00895 l -28.00643,13.00299 -26.00597,-21.00483 -35.00804,-6.00137 -72.01653,26.00597 c -19.3392,14.60256 -39.60323,35.67902 -58.01332,43.77781 z"
     
        </g>
    </svg>

    <script>
        const fileInput = document.getElementById('audioFile');
        const audioPlayer = document.getElementById('audioPlayer');
        const songSelect = document.getElementById('songSelect');
        const shapes = {
            coldplay1: document.getElementById('coldplay1'),
            lemonade: document.getElementById('lemonade'),
            good: document.getElementById('good'),
            meditate: document.getElementById('meditate'),
            dance: document.getElementById('dance'),
            nature: document.getElementById('nature'),
            monkey: document.getElementById('monkey')
        };
    
        let audioContext, analyser, frequencyData;
        let currentShapeIndex = 0;
        let cycleTimeout;
        let isInitialized = false; // Asegura que initAudio solo se ejecute una vez
    
        const songConfig = {
            song1: {
                shapeOrder: ['coldplay1', 'lemonade', 'good', 'meditate', 'dance', 'nature', 'monkey'],
                durations: [3000, 3000, 3000, 3000, 3000, 3000, 3000]
            },
            song2: {
                shapeOrder: ['monkey', 'nature', 'dance', 'meditate', 'good', 'lemonade', 'coldplay1'],
                durations: [5000, 5000, 5000, 5000, 5000, 5000, 5000]
            }
        };
    
        fileInput.addEventListener('change', handleFileUpload);
        songSelect.addEventListener('change', resetVisualizer);
        audioPlayer.addEventListener('play', startCycleShapes);
        audioPlayer.addEventListener('pause', stopCycleShapes);
    
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('audio/')) {
                const audioURL = URL.createObjectURL(file);
                audioPlayer.src = audioURL;
                audioPlayer.load();
                if (!isInitialized) {
                    initAudio();
                }
            } else {
                alert('Please upload a valid audio file.');
            }
        }
    
        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            frequencyData = new Uint8Array(analyser.frequencyBinCount);
    
            const source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
    
            isInitialized = true; // Marca el contexto como inicializado
            visualize();
        }
    
        function visualize() {
            if (audioContext && audioContext.state === 'running') { // Verifica que el contexto esté activo
                requestAnimationFrame(visualize);
                analyser.getByteFrequencyData(frequencyData);
    
                const averageFrequency = frequencyData.reduce((a, b) => a + b) / frequencyData.length;
                const scale = averageFrequency / 255;
    
                const selectedShape = shapes[getCurrentShape()];
                const hue = Math.round((averageFrequency / 255) * 360);
                selectedShape.setAttribute('fill', `hsl(${hue}, 100%, 50%)`);
                selectedShape.setAttribute('transform', `scale(${scale + 0.5})`);
            }
        }
    
        function startCycleShapes() {
            if (!isInitialized) { // Asegura que initAudio se haya ejecutado
                initAudio();
            }
            const songData = songConfig[songSelect.value];
            updateShapeVisibility();
    
            cycleTimeout = setTimeout(() => {
                currentShapeIndex = (currentShapeIndex + 1) % songData.shapeOrder.length;
                if (!audioPlayer.paused) {
                    startCycleShapes();
                }
            }, songData.durations[currentShapeIndex]);
        }
    
        function stopCycleShapes() {
            clearTimeout(cycleTimeout);
        }
    
        function resetVisualizer() {
            clearTimeout(cycleTimeout);
            audioPlayer.currentTime = 0;
            audioPlayer.pause();
            currentShapeIndex = 0;
            updateShapeVisibility();
        }
    
        function getCurrentShape() {
            return songConfig[songSelect.value].shapeOrder[currentShapeIndex];
        }
    
        function updateShapeVisibility() {
            Object.keys(shapes).forEach(key => {
                shapes[key].style.display = key === getCurrentShape() ? 'block' : 'none';
            });
        }
    </script>    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
</body>
</html>
